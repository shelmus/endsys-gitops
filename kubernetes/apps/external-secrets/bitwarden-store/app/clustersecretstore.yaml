---
# ClusterSecretStore for Bitwarden Secrets Manager
# This enables all namespaces to pull secrets from Bitwarden
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: bitwarden-secrets
  labels:
    app.kubernetes.io/name: bitwarden-secrets
    app.kubernetes.io/instance: bitwarden-secrets
    app.kubernetes.io/component: secret-store
    app.kubernetes.io/part-of: external-secrets
spec:
  provider:
    bitwardensecretsmanager:
      # API URL for Bitwarden Secrets Manager
      # For self-hosted: use your instance URL
      # For cloud: https://api.bitwarden.com (US) or https://api.bitwarden.eu (EU)
      apiURL: https://api.bitwarden.com
      identityURL: https://identity.bitwarden.com
      # Organization ID from Bitwarden Secrets Manager
      # Find this in: Bitwarden Web Vault -> Settings -> Organization Info
      # Format: UUID (e.g., "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx")
      organizationID: "0a3084d7-f0e5-4f83-ae02-b29800a63d79"
      # Project ID from Bitwarden Secrets Manager
      # Find this in: Bitwarden Secrets Manager -> Projects -> Select your project -> Project ID
      # Format: UUID (e.g., "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx")
      projectID: "02bfc83f-ae7b-4515-9f19-b29800a83d77"
      # Reference to the secret containing the Bitwarden access token
      auth:
        secretRef:
          credentials:
            name: bitwarden-access-token
            namespace: external-secrets
            key: token

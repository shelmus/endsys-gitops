---
# ClusterSecretStore for Bitwarden Secrets Manager
# This enables all namespaces to pull secrets from Bitwarden
apiVersion: external-secrets.io/v1
kind: ClusterSecretStore
metadata:
  name: bitwarden-secrets
  labels:
    app.kubernetes.io/name: bitwarden-secrets
    app.kubernetes.io/instance: bitwarden-secrets
    app.kubernetes.io/component: secret-store
    app.kubernetes.io/part-of: external-secrets
spec:
  provider:
    bitwardensecretsmanager:
      # API URL for Bitwarden Secrets Manager
      # For self-hosted: use your instance URL
      # For cloud: https://api.bitwarden.com (US) or https://api.bitwarden.eu (EU)
      apiURL: https://api.bitwarden.com
      identityURL: https://identity.bitwarden.com
      # Reference to the secret containing the Bitwarden access token
      auth:
        secretRef:
          credentials:
            name: bitwarden-access-token
            namespace: external-secrets
            key: token

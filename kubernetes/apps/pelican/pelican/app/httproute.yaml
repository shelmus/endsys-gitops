---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: pelican-panel
spec:
  parentRefs:
  - name: internal
    namespace: kube-system
    sectionName: https
  hostnames: ["pelican.endsys.cloud"]
  rules:
    - matches:
      - path:
          type: PathPrefix
          value: /
      filters:
        # equivalent to nginx.ingress.kubernetes.io/rewrite-target: /
        - type: URLRewrite
          urlRewrite:
            path:
              type: ReplacePrefixMatch
              replacePrefixMatch: /
    - backendRefs:
        - name: pelican-panel
          port: 80